# Formats

This directory defines canonical input formats referenced by fields under `fields/`.
Each format includes a regex, tooltip, error message, examples, and implementation
notes to ensure consistent validation and UX across Laserfiche Forms and workflows.

Use these formats by referencing their docs from field JSONs via `formatRef`.

## Conventions

- Regexes are provided for form validation. If further business rules apply,
  complement with SQL validations under `sql/`.
- Tooltips should be short, actionable guidance. Error messages should be
  specific and helpful.
- Examples list both valid and invalid values, including edge cases.

## Date (US): MM/DD/YYYY

- Regex: `^(0[1-9]|1[0-2])\/(0[1-9]|[12][0-9]|3[01])\/\d{4}$`
- Tooltip: "Use MM/DD/YYYY (e.g., 03/21/2025)."
- Error: "Enter a valid date in MM/DD/YYYY format."

Examples:

```text
Valid:   01/01/1990, 12/31/2025, 02/29/2024 (leap day allowed syntactically)
Invalid: 1/1/1990, 13/10/2020, 02/30/2020, 00/10/2020, 11/00/2020
```

Notes:

- This regex does not validate calendar correctness beyond basic ranges
  (e.g., it allows 02/29 in non-leap years). If calendar accuracy is required,
  add SQL/workflow validation.
- Always store dates as ISO (YYYY-MM-DD) internally when possible; use
  MM/DD/YYYY only for display and input consistency.

## Country Calling Code: +NNNN (1–4 digits)

- Regex: `^\+\d{1,4}$`
- Tooltip: "Enter a plus sign followed by 1–4 digits (e.g., +1, +504)."
- Error: "Enter a country code like +1 or +504."

Examples:

```text
Valid:   +1, +44, +504, +972
Invalid: 1, ++1, +, +12345, +1-202
```

Notes:

- This is the ITU E.164 international calling code component, not a full phone
  number. If full phone number validation is required, define a dedicated format.

## Capitalized Names (letters only, words capitalized)

- Regex: `^[A-Z][a-z]+(?: [A-Z][a-z]+)*$`
- Tooltip: "Capitalize each word (e.g., John Doe)."
- Error: "Use capitalized words (letters only)."

Examples:

```text
Valid:   John, John Doe, Mary Jane Watson
Invalid: john, JOHN, John doe, John-Doe, O'Connor, Ana María
```

Notes:

- Strict ASCII A–Z letters only; no hyphens, apostrophes, or diacritics.
- For broader name support, define a separate format that allows punctuation
  and Unicode letters, and update fields accordingly.

## US SSN: ###-##-####

- Regex: `^\d{3}-\d{2}-\d{4}$`
- Tooltip: "Use ###-##-#### format."
- Error: "Enter SSN as ###-##-####."

Examples:

```text
Valid:   123-45-6789
Invalid: 123456789, 12-345-6789, 123-456-789, 000-12-3456
```

Notes:

- This regex enforces format only, not issuance rules (e.g., area numbers).
  Add workflow checks if stricter validation is required.
- Treat SSN as sensitive; avoid logging. Mask in UI when appropriate.

## Canadian SIN: ### ### ###

- Regex: `^\d{3} \d{3} \d{3}$`
- Tooltip: "Use ### ### ### format."
- Error: "Enter SIN as ### ### ###."

Examples:

```text
Valid:   123 456 789
Invalid: 123456789, 12 3456 789, 000 123 456
```

Notes:

- Format-only. If required, implement the Luhn check in workflow.
- Treat SIN as sensitive; avoid logging. Mask in UI when appropriate.

## Implementation guidance

- Use the exact regex string in field JSONs to avoid divergence.
- Keep `tooltip` and `error` texts consistent across all fields reusing
  a format; if different wording is needed for UX, ensure intent remains
  the same.
- When normalizing, store canonical forms (e.g., ISO dates) and only format
  for display.
- For locale-specific considerations, add a localized variant of the format
  and reference it explicitly from the field.

